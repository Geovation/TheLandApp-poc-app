<md-toolbar class="app-header">
    <div class="md-toolbar-tools md-toolbar-tools--no-left-padding">
        <img src="assets/images/land-app-logo-transparent.png" class="logo" ng-click="$emit('la-fitExtent')"/>
        <h2>
      <span title="{{ENV | json}}">The&nbsp;Land&nbsp;App</span>
    </h2>
        <md-autocomplete md-selected-item="vmHeader.selectedItem" md-search-text-change="vmHeader.searchTextChange(vmHeader.searchText)" md-search-text="vmHeader.searchText" md-selected-item-change="vmHeader.selectedItemChange(item)" md-items="item in vmHeader.querySearch(vmHeader.searchText)" md-item-text="item.display_name" md-min-length="3" md-delay="500" placeholder="Search">
            <md-item-template>
                <span md-highlight-text="vmHeader.searchText" md-highlight-flags="gi">{{item.display_name}}</span>
            </md-item-template>
            <md-not-found>
                No addresses matching "{{vmHeader.searchText}}" were found.
            </md-not-found>
        </md-autocomplete>
        <span flex></span>
        <md-button class="md-primary narrow" ng-click="vmHeader.toggleLayersPanel()">
          <md-icon md-svg-src="assets/images/icons/layers_128.svg"></md-icon>
        </md-button>
        <md-menu md-position-mode="target-right target">
            <md-button aria-label="Open demo menu" class="md-icon-button" ng-click="$mdOpenMenu($event)">
                <i class="fa fa-lg fa-ellipsis-v top-menu__icon"></i>
            </md-button>
            <md-menu-content width="3">
                <md-menu-item>
                    <md-button ng-click="vmHeader.shareThisMap()">
                        <div layout="row">
                          <md-icon>group</md-icon>
                          <p flex>Share this map</p>
                        </div>
                    </md-button>
                </md-menu-item>
                <md-menu-item>
                    <md-button ng-click="indexVm.logout()" ng-if="indexVm.authData">
                        <div layout="row">
                           <md-icon>exit_to_app</md-icon>
                          <p flex>Log out ({{indexVm.authData.password.email}})</p>
                        </div>
                    </md-button>
                    <md-button ng-click="indexVm.login()" ng-if="!indexVm.authData">
                      <div layout="row">
                         <md-icon>account_box</md-icon>
                        <p flex>Log in</p>
                      </div>
                    </md-button>
                </md-menu-item>
            </md-menu-content>
        </md-menu>
    </div>
</md-toolbar>
